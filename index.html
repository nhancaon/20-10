<!DOCTYPE html>
<html lang="vi">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Ch√∫c M·ª´ng 20/10</title>
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Playfair+Display:wght@400;700&family=Quicksand:wght@400;600;700&display=swap"
			rel="stylesheet"
		/>
		<style>
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			body {
				overflow: hidden;
				background: #000;
				font-family: "Quicksand", sans-serif;
				display: flex;
				justify-content: center;
				align-items: center;
				min-height: 100vh;
			}

			.container {
				position: relative;
				text-align: center;
			}

			canvas {
				display: block;
				background: #000;
				margin-top: -150px;
			}

			.text-overlay {
				position: absolute;
				top: 50%;
				left: 50%;
				transform: translate(-50%, -50%);
				text-align: center;
				color: white;
				pointer-events: none;
				z-index: 10;
				margin-top: -330px;
			}

			.date-text {
				font-size: 72px;
				font-weight: bold;
				margin-bottom: 10px;
				text-shadow: 0 0 20px rgba(247, 96, 112, 0.8);
				animation: glow 2s ease-in-out infinite;
				letter-spacing: 15px;
				font-family: "Playfair Display", serif;
			}

			@keyframes glow {
				0%,
				100% {
					text-shadow: 0 0 20px rgba(247, 96, 112, 0.8);
				}
				50% {
					text-shadow: 0 0 30px rgba(247, 96, 112, 1),
						0 0 40px rgba(247, 96, 112, 0.8);
				}
			}

			.card-container {
				position: absolute;
				top: 50%;
				left: 50%;
				transform: translate(-50%, -50%);
				margin-top: 250px;
				perspective: 1500px;
				z-index: 10;
			}

			.card {
				width: 500px;
				height: 300px;
				position: relative;
				transform-style: preserve-3d;
				cursor: pointer;
			}

			.card-half {
				position: absolute;
				width: 50%;
				height: 100%;
				background: linear-gradient(145deg, #fff5f5 0%, #ffe8e8 100%);
				border: 3px solid #d4af37;
				box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6),
					inset 0 0 20px rgba(212, 175, 55, 0.1);
				display: flex;
				align-items: center;
				justify-content: center;
				transition: transform 1.2s cubic-bezier(0.4, 0, 0.2, 1);
				overflow: hidden;
			}

			.card-half::before {
				content: "";
				position: absolute;
				width: 100%;
				height: 100%;
				background: radial-gradient(
						circle at 20% 20%,
						rgba(212, 175, 55, 0.1) 0%,
						transparent 50%
					),
					radial-gradient(
						circle at 80% 80%,
						rgba(212, 175, 55, 0.1) 0%,
						transparent 50%
					);
			}

			.card-half::after {
				content: "";
				position: absolute;
				top: 10px;
				left: 10px;
				right: 10px;
				bottom: 10px;
				border: 1px solid #d4af37;
				border-radius: 8px;
				pointer-events: none;
			}

			.card-left {
				left: 0;
				transform-origin: left;
				border-radius: 15px 0 0 15px;
			}

			.card-right {
				right: 0;
				transform-origin: right;
				border-radius: 0 15px 15px 0;
			}

			.card.open .card-left {
				transform: rotateY(-130deg);
			}

			.card.open .card-right {
				transform: rotateY(130deg);
			}

			.card-content {
				position: absolute;
				width: 100%;
				height: 100%;
				display: flex;
				flex-direction: column;
				align-items: center;
				justify-content: center;
				background: linear-gradient(145deg, #ffffff 0%, #fff5f5 100%);
				border: 3px solid #d4af37;
				border-radius: 10px;
				box-shadow: inset 0 0 30px rgba(212, 175, 55, 0.2);
				text-align: center;
				padding: 55px 45px;
				opacity: 0;
				transition: opacity 1.2s ease 1.2s;
				pointer-events: none;
				overflow-y: auto;
			}

			.card-content::before {
				content: "";
			}

			.card-content::after {
				content: "";
			}

			.card.open .card-content {
				opacity: 1;
				pointer-events: auto;
			}

			.card-content h2 {
				font-family: "Dancing Script", cursive;
				font-size: 24px;
				font-weight: 700;
				margin-bottom: 20px;
				margin-top: 8px;
				color: #e60073;
				text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
				letter-spacing: 0.5px;
				line-height: 1.4;
			}

			.card-content p {
				font-family: "Quicksand", sans-serif;
				font-size: 14.5px;
				line-height: 1.7;
				color: #333;
				margin-bottom: 10px;
				font-weight: 500;
			}

			.card-content p:last-of-type {
				margin-bottom: 0;
			}

			.card-content strong {
				color: #d63384;
				font-weight: 700;
			}

			.card-front {
				font-family: "Playfair Display", serif;
				font-size: 80px;
				font-weight: bold;
				color: #8b4049;
				text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
				z-index: 1;
				position: relative;
			}

			.ornament {
				position: absolute;
				color: #d4af37;
				opacity: 0.4;
				font-size: 60px;
			}

			.ornament.top-left {
				top: 15px;
				left: 15px;
			}

			.ornament.top-right {
				top: 15px;
				right: 15px;
			}

			.ornament.bottom-left {
				bottom: 15px;
				left: 15px;
			}

			.ornament.bottom-right {
				bottom: 15px;
				right: 15px;
			}

			.click-hint {
				position: absolute;
				bottom: -50px;
				left: 50%;
				transform: translateX(-50%);
				color: white;
				font-size: 16px;
				opacity: 0.8;
				animation: pulse 2s ease-in-out infinite;
				pointer-events: none;
				font-family: "Quicksand", sans-serif;
			}

			.card.open .click-hint {
				display: none;
			}

			@keyframes pulse {
				0%,
				100% {
					opacity: 0.8;
					transform: translateX(-50%) scale(1);
				}
				50% {
					opacity: 1;
					transform: translateX(-50%) scale(1.05);
				}
			}

			.falling-hearts {
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				pointer-events: none;
				z-index: 1;
			}

			.falling-heart {
				position: absolute;
				font-size: 20px;
				opacity: 0;
				animation: fall linear forwards;
			}

			@keyframes fall {
				0% {
					top: -50px;
					opacity: 0;
					transform: translateX(0) rotate(0deg);
				}
				10% {
					opacity: 1;
				}
				90% {
					opacity: 1;
				}
				100% {
					top: 100vh;
					opacity: 0;
					transform: translateX(var(--drift)) rotate(360deg);
				}
			}
		</style>
	</head>
	<body>
		<div class="falling-hearts" id="fallingHearts"></div>
		<div class="container">
			<canvas id="heartCanvas" width="640" height="480"></canvas>
			<div class="text-overlay">
				<div class="date-text">20/10</div>
			</div>

			<div class="card-container">
				<div class="card" id="greetingCard">
					<div class="card-half card-left">
						<span class="ornament top-left">‚ù¶</span>
						<span class="ornament bottom-left">‚ú§</span>
						<div class="card-front">20</div>
					</div>
					<div class="card-half card-right">
						<span class="ornament top-right">‚ù¶</span>
						<span class="ornament bottom-right">‚ú§</span>
						<div class="card-front">10</div>
					</div>
					<div class="card-content">
						<h2>üíê Ch√∫c M·ª´ng<br />Ng√†y Ph·ª• N·ªØ Vi·ªát Nam üíê</h2>
						<p>
							Ch√∫c c√°c ch·ªã em c√¥ng ty m√¨nh ng√†y <strong>20/10</strong> lu√¥n
							<strong>xinh&nbsp;t∆∞∆°i</strong>, <strong>y√™u&nbsp;ƒë·ªùi</strong>,
							<strong>kh√¥ng&nbsp;lo&nbsp;deadline</strong>!
						</p>
						<p>
							<strong>ƒê·ªôc&nbsp;th√¢n&nbsp;vui&nbsp;t√≠nh</strong> ‚Äì
							<strong>s·ªõm&nbsp;c√≥&nbsp;ng∆∞·ªùi&nbsp;d√≠nh</strong>
						</p>
						<p>
							Ch√∫c m·ªçi ng∆∞·ªùi <strong>xinh&nbsp;nh∆∞&nbsp;hoa</strong>,
							<strong>gi·ªèi&nbsp;nh∆∞&nbsp;boss</strong>, n√≥i c√¢u n√†o c≈©ng ƒë∆∞·ª£c
							like, ra ƒë∆∞·ªùng ai c≈©ng ph·∫£i ngo√°i nh√¨n!
						</p>
						<p>
							Ch√∫c c√°c b√¥ng hoa c·ªßa c√¥ng ty lu√¥n <strong>vui&nbsp;v·∫ª</strong>,
							<strong>h·∫°nh&nbsp;ph√∫c</strong> v√†
							<strong>t·ªèa&nbsp;s√°ng&nbsp;r·ª±c&nbsp;r·ª°</strong> kh√¥ng ch·ªâ h√¥m nay
							m√† c·∫£ <strong>364&nbsp;ng√†y</strong> c√≤n l·∫°i! üå∏üíñ
						</p>
					</div>
					<div class="click-hint">üëÜ Nh·∫•n ƒë·ªÉ m·ªü thi·ªáp</div>
				</div>
			</div>
		</div>

		<script>
			const card = document.getElementById("greetingCard");
			card.addEventListener("click", function () {
				this.classList.toggle("open");
			});

			const canvas = document.getElementById("heartCanvas");
			const ctx = canvas.getContext("2d");

			const CANVAS_WIDTH = 640;
			const CANVAS_HEIGHT = 480;
			const CANVAS_CENTER_X = CANVAS_WIDTH / 2;
			const CANVAS_CENTER_Y = CANVAS_HEIGHT / 2;
			const IMAGE_ENLARGE = 11;
			const HEART_COLOR = "#f76070";

			function heartFunction(t, shrinkRatio = IMAGE_ENLARGE) {
				let x = 16 * Math.pow(Math.sin(t), 3);
				let y = -(
					13 * Math.cos(t) -
					5 * Math.cos(2 * t) -
					2 * Math.cos(3 * t) -
					Math.cos(4 * t)
				);
				x *= shrinkRatio;
				y *= shrinkRatio;
				x += CANVAS_CENTER_X;
				y += CANVAS_CENTER_Y;
				return [Math.floor(x), Math.floor(y)];
			}

			function scatterInside(x, y, beta = 0.15) {
				const ratioX = -beta * Math.log(Math.random());
				const ratioY = -beta * Math.log(Math.random());
				const dx = ratioX * (x - CANVAS_CENTER_X);
				const dy = ratioY * (y - CANVAS_CENTER_Y);
				return [x - dx, y - dy];
			}

			function shrink(x, y, ratio) {
				const force =
					-1 /
					Math.pow(
						Math.pow(x - CANVAS_CENTER_X, 2) + Math.pow(y - CANVAS_CENTER_Y, 2),
						0.6
					);
				const dx = ratio * force * (x - CANVAS_CENTER_X);
				const dy = ratio * force * (y - CANVAS_CENTER_Y);
				return [x - dx, y - dy];
			}

			function curve(p) {
				return (2 * (2 * Math.sin(4 * p))) / (2 * Math.PI);
			}

			class Heart {
				constructor(generateFrame = 20) {
					this.points = new Set();
					this.edgeDiffusionPoints = new Set();
					this.centerDiffusionPoints = new Set();
					this.allPoints = {};
					this.generateFrame = generateFrame;
					this.build(2000);
					for (let frame = 0; frame < generateFrame; frame++) {
						this.calc(frame);
					}
				}

				build(number) {
					for (let i = 0; i < number; i++) {
						const t = Math.random() * 2 * Math.PI;
						const [x, y] = heartFunction(t);
						this.points.add(`${x},${y}`);
					}

					const pointList = Array.from(this.points).map((p) =>
						p.split(",").map(Number)
					);

					pointList.forEach(([x, y]) => {
						for (let i = 0; i < 3; i++) {
							const [nx, ny] = scatterInside(x, y, 0.05);
							this.edgeDiffusionPoints.add(`${nx},${ny}`);
						}
					});

					for (let i = 0; i < 4000; i++) {
						const [x, y] =
							pointList[Math.floor(Math.random() * pointList.length)];
						const [nx, ny] = scatterInside(x, y, 0.17);
						this.centerDiffusionPoints.add(`${nx},${ny}`);
					}
				}

				calcPosition(x, y, ratio) {
					const force =
						1 /
						Math.pow(
							Math.pow(x - CANVAS_CENTER_X, 2) +
								Math.pow(y - CANVAS_CENTER_Y, 2),
							0.52
						);
					const dx =
						ratio * force * (x - CANVAS_CENTER_X) + (Math.random() * 3 - 1);
					const dy =
						ratio * force * (y - CANVAS_CENTER_Y) + (Math.random() * 3 - 1);
					return [x - dx, y - dy];
				}

				calc(generateFrame) {
					const ratio = 10 * curve((generateFrame / 10) * Math.PI);
					const haloRadius = Math.floor(
						4 + 6 * (1 + curve((generateFrame / 10) * Math.PI))
					);
					const haloNumber = Math.floor(
						3000 +
							4000 *
								Math.abs(Math.pow(curve((generateFrame / 10) * Math.PI), 2))
					);

					const allPoints = [];
					const heartHaloPoint = new Set();

					for (let i = 0; i < haloNumber; i++) {
						const t = Math.random() * 2 * Math.PI;
						let [x, y] = heartFunction(t, 11.6);
						[x, y] = shrink(x, y, haloRadius);

						const key = `${Math.floor(x)},${Math.floor(y)}`;
						if (!heartHaloPoint.has(key)) {
							heartHaloPoint.add(key);
							x += Math.random() * 28 - 14;
							y += Math.random() * 28 - 14;
							const size = [1, 2, 2][Math.floor(Math.random() * 3)];
							allPoints.push([x, y, size]);
						}
					}

					Array.from(this.points).forEach((p) => {
						let [x, y] = p.split(",").map(Number);
						[x, y] = this.calcPosition(x, y, ratio);
						const size = Math.floor(Math.random() * 3) + 1;
						allPoints.push([x, y, size]);
					});

					Array.from(this.edgeDiffusionPoints).forEach((p) => {
						let [x, y] = p.split(",").map(Number);
						[x, y] = this.calcPosition(x, y, ratio);
						const size = Math.floor(Math.random() * 2) + 1;
						allPoints.push([x, y, size]);
					});

					Array.from(this.centerDiffusionPoints).forEach((p) => {
						let [x, y] = p.split(",").map(Number);
						[x, y] = this.calcPosition(x, y, ratio);
						const size = Math.floor(Math.random() * 2) + 1;
						allPoints.push([x, y, size]);
					});

					this.allPoints[generateFrame] = allPoints;
				}

				render(frame) {
					ctx.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);
					const points = this.allPoints[frame % this.generateFrame];
					points.forEach(([x, y, size]) => {
						ctx.fillStyle = HEART_COLOR;
						ctx.fillRect(Math.floor(x), Math.floor(y), size, size);
					});
				}
			}

			const heart = new Heart(20);
			let frame = 0;

			function animate() {
				heart.render(frame);
				frame++;
				setTimeout(() => {
					requestAnimationFrame(animate);
				}, 160);
			}

			animate();

			const fallingHeartsContainer = document.getElementById("fallingHearts");
			const heartEmojis = ["üå∏", "üå∏", "üíñ", "üå∏", "üå∏", "üíù"];

			function createFallingHeart() {
				const heart = document.createElement("div");
				heart.classList.add("falling-heart");
				heart.textContent =
					heartEmojis[Math.floor(Math.random() * heartEmojis.length)];

				const leftPosition = Math.random() * 100;
				heart.style.left = leftPosition + "%";

				const size = 15 + Math.random() * 25;
				heart.style.fontSize = size + "px";

				const duration = 4 + Math.random() * 4;
				heart.style.animationDuration = duration + "s";

				const drift = (Math.random() - 0.5) * 100;
				heart.style.setProperty("--drift", drift + "px");

				fallingHeartsContainer.appendChild(heart);

				setTimeout(() => {
					heart.remove();
				}, duration * 1000);
			}

			setInterval(createFallingHeart, 200);

			for (let i = 0; i < 10; i++) {
				setTimeout(createFallingHeart, i * 200);
			}
		</script>
	</body>
</html>
